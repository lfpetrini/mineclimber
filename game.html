<!DOCTYPE html>
<html>
<head>
	<title>Mine Climber</title>
	<style type="text/css">
		body {
			text-align: center;
			background: #000;
			color: #FFFFFF;
		}
		a:link {
			color: #FFFFFF;
			text-decoration: underline;
		}
		a:visited {
			color: #FFFFFF;
			text-decoration: underline;
		}
		a:hover {
			color: #BBFFBB;
			text-decoration: none;
		}
		a:active {
			color: #FFBBBB;
			text-decoration: none;
		}
		@font-face {
			font-family: 'SilkScreenRegular';
			src: url('res/fonts/slkscr.ttf');
		}
	</style>
	<script src="scripts/util/util.js"></script>
	<script src="scripts/util/assetmanager.js"></script>
	<script src="scripts/util/camera.js"></script>
	<script src="scripts/util/map.js"></script>
	<script src="scripts/util/animation.js"></script>
	<script src="scripts/util/items.js"></script>
	<!-- <script src="scripts/util/pool.js"></script> -->
	<script src="scripts/objects/gameobject.js"></script>
	<script src="scripts/objects/character.js"></script>
	<script src="scripts/objects/player.js"></script>
	<script src="scripts/objects/seller.js"></script>
	<script src="scripts/objects/enemies.js"></script>
	<!-- <script src="scripts/objects/goblin.js"></script>
	<script src="scripts/objects/ogre.js"></script> -->
	<script src="scripts/objects/chest.js"></script>
	<script src="scripts/objects/collectables.js"></script>
	<script src="scripts/objects/money.js"></script>
	<script src="scripts/objects/particle.js"></script>
	<script src="scripts/objects/text.js"></script>
	<script src="scripts/objects/attackboxes.js"></script>
	<script src="scripts/states/gamestate.js"></script>
	<script src="scripts/states/playingstate.js"></script>
	<script src="scripts/states/menustate.js"></script>
	<script src="scripts/states/gameoverstate.js"></script>
	<script src="scripts/states/instructionsstate.js"></script>
	<script src="scripts/states/creditsstate.js"></script>
	<script src="scripts/game.js"></script>
	<script type="text/javascript">
	
		var ASSET_MANAGER = new AssetManager();
		var ANIMATION_SET_REPO = new AnimationSetRepository();
		var ITEMS_REPO = new ItemRepository();
		var KEY_LEFT = 37, KEY_RIGHT = 39, KEY_UP = 38, KEY_DOWN = 40, KEY_X = 88, KEY_C = 67, KEY_S = 83;
		var game;
		var gameCanvas;
	
		window.onload = function () {
			if(window.File && window.FileReader) {
				game = new Game();
				game.init(startCanvas());
				// Start Input
				startInput();
			}
			else {
				alert("Sorry, your browser doesn't support this application.");
			}
		}
					
		// INPUT HANDLER
		var keyPressed = {};
		var mousePressed;
		var mousePosition = new Array(2);
		function startInput() {
			window.addEventListener("keydown", function(e) {
				keyPressed[e.keyCode] = true;
			}, false);
			window.addEventListener("keyup", function(e) {
				keyPressed[e.keyCode] = false;
			}, false);
			window.addEventListener("mousemove", function(e) {
				mouseMoved(e.clientX, e.clientY);
			}, false);
			gameCanvas.addEventListener("mousedown", function(e) {
				mousePressed = true;
				mouseClicked(e.clientX, e.clientY);
			}, false);
			gameCanvas.addEventListener("mouseup", function(e) {
				mousePressed = false;
			}, false);
		}
		
		// MOUSE MOVED!!
		function mouseMoved(x, y) {
			mousePosition = [x, y];
		}
		// MOUSE CLICKED!!
		function mouseClicked(x, y) {
		}
		
		function startCanvas() {
			gameCanvas = document.getElementById("gameCanvas");
			var context = gameCanvas.getContext("2d");
			context.clearRect(0, 0, game.CANVAS_WIDTH, game.CANVAS_HEIGHT);
			return context;
		}
		
		// HANDLE PAUSE
		window.onblur = function() { this.game.isPaused = true; };
		
		window.onfocus = function() { this.game.isPaused = false; };
		
	</script>
</head>
<body>
	<a href="/index.php">Return to HOME</a><br/><br/>
	Keys: Arrow keys, C, X, S
	<br/><br/>
	<canvas id="gameCanvas" width="600px" height="600px" style="width:600px; height:600px"></canvas>
	<div id="xxx"></div>
</body>
</html>
